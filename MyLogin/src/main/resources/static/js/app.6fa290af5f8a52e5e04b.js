webpackJsonp([1],{0:function(e,t){},1:function(e,t,r){r("briU"),e.exports=r("NHnr")},2:function(e,t){},3:function(e,t){},EQOc:function(e,t){},JKkS:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("3l+p");var n=r("xd7I"),o={data:function(){return{navActiveIndex:"1",ifLogin:!1,username:"尚未登录"}},mounted:function(){this.whetherLogin()},watch:{$route:"whetherLogin"},methods:{whetherLogin:function(){var e=this;null!==localStorage.getItem("token")||null!==sessionStorage.getItem("token")?this.$api.get("/user/getInfo",{},function(t){e.username=t.data.username,e.ifLogin=!0}):this.ifLogin=!1},handleSelect:function(e){"2-1"===e&&(this.$api.removeToken(),this.$message.success("注销成功"),this.$router.push("login"))}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-menu",{attrs:{"default-active":e.navActiveIndex,mode:"horizontal","menu-trigger":"click"},on:{select:e.handleSelect}},[r("el-menu-item",{attrs:{index:"1"}},[r("span",[r("img",{staticClass:"icon",attrs:{src:"/static/image/favicon.svg",alt:"网站图标"}}),e._v(" 网站名")])]),e._v(" "),e.ifLogin?r("el-submenu",{staticClass:"userMenu",attrs:{index:"2"}},[r("template",{slot:"title"},[e._v(e._s(e.username))]),e._v(" "),r("el-menu-item",{staticClass:"exitMenu",attrs:{index:"2-1"}},[e._v("注销")])],2):e._e()],1)},staticRenderFns:[]};var a=r("C7Lr")(o,l,!1,function(e){r("wWmV")},"data-v-8adb7faa",null).exports,i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"gap"}),this._v(" "),t("footer",{staticClass:"footer"},[t("span",[this._v("© 2017 SafePass · 苏 ICP 备 15057782 号")])])])}]};var s=r("C7Lr")(null,i,!1,function(e){r("EQOc")},"data-v-aaa78890",null).exports,u={data:function(){return{loginForm:{username:"",password:"",remember:!1},loginRules:{username:[{validator:function(e,t,r){""===t?r(new Error("请输入用户名")):t.length<1||t.length>16?r(new Error("用户名格式不正确")):r()},trigger:"blur"}],password:[{validator:function(e,t,r){var n=new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$).{8,32}$/);""===t?r(new Error("请输入密码")):n.test(t)?r():r(new Error("密码格式不正确"))},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log(t.loginForm.password),t.$api.post("/user/login",{userid:t.loginForm.username,password:t.loginForm.password},function(e){if(console.log(e),"usernameOrPasswordError"===e.data)t.$message.error("用户名或密码错误");else{t.$message.success("登录成功");var r=t.$route.query.redirect;void 0!==r?console.log(r):(t.$router.push("./content"),console.log(r))}})})},RegisterForm:function(e){console.log(e),this.$router.push("./register")}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.loginRules}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{staticClass:"loginUsername",attrs:{type:"text","auto-complete":"on",placeholder:"请输入用户名",clearable:""},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码",clearable:""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"loginBtn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("登录")]),e._v(" "),r("el-button",{staticClass:"RegisterBtn",attrs:{type:"primary"},on:{click:function(t){return e.RegisterForm("ResisterForm")}}},[e._v("注册")])],1)],1)},staticRenderFns:[]},m=r("C7Lr")(u,c,!1,null,null,null).exports,p={name:"App",components:{navigation:a,copyright:s,login:m},created:function(){var e=localStorage.getItem("token"),t=sessionStorage.getItem("token");if(null!==e||null!==t){var r=null===e?t:e;this.$api.setToken(r)}}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("navigation"),this._v(" "),t("router-view"),this._v(" "),t("copyright")],1)},staticRenderFns:[]};var f=r("C7Lr")(p,d,!1,function(e){r("Onu6")},null,null).exports,g=r("3XdE"),h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"center"},[t("img",{staticClass:"indexImg",attrs:{src:"/static/image/logo347x74@2x.png",alt:"网站名称图片"}}),this._v(" "),t("p",{staticClass:"normSubtitleColor indexSubtitle"},[this._v("网站介绍")]),this._v(" "),t("div",{staticClass:"indexInputGroup"},[t("router-view")],1)])},staticRenderFns:[]};var v=r("C7Lr")({data:function(){return{}},methods:{}},h,!1,function(e){r("NQTr")},null,null).exports,b=r("3cXf"),F=r.n(b),x={data:function(){var e=function(e,t,r){var n=t.replace(/\s/g,"");0==t.length?r():/^((13[0-9])|(17[0-1,6-8])|(15[^4,\\D])|(18[0-9]))\d{8}$/.test(n)?r():r([new Error("手机号输入不合法")])};return{startTime:"",endTime:"",todaydate:"",num:"",paymoney:"",ruleForm:{input1:"",input2:"",input3:"",input4:"",input5:"",input6:""},rules:{input1:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],input2:[{required:!0,message:"请输入手機號",trigger:"blur"},{validator:e,trigger:"blur"}],input3:[{required:!0,message:"请输入活动名称",trigger:"blur"}],input4:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],input5:[{required:!0,message:"请输入活动名称",trigger:"blur"}],input6:[{required:!0,message:"请输入活动名称",trigger:"blur"},{validator:e,trigger:"blur"}],todaydate:[{required:!0,message:"请输入活动名称",trigger:"blur"}]},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},methods:{handleChange:function(e){console.log(e)},moneysum:function(){var e=this.startTime,t=this.endTime,r=e.split(":"),n=t.split(":"),o=.2*(60*(n[0]-r[0])+(n[1]-r[1])),l=1*this.num;this.paymoney=o+l,console.log(this.endTime),console.log(this.startTime),console.log(r[0]),console.log(n[0]),console.log(o),alert(this.paymoney)},handsubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!");var r={username:t.ruleForm.input1,usertele:t.ruleForm.input2,cartype:t.ruleForm.input3,carnumber:t.ruleForm.input4,drivername:t.ruleForm.input5,drivertele:t.ruleForm.input6,time:t.todaydate,paymoney:t.paymoney};console.log(r),t.$api.post("/user/loadin",{obj:F()(r)},function(e){console.log(e.data),"success"===e.data&&t.$router.push("./test")})})}}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"客户姓名",prop:"input1"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"input",autocomplete:"off"},model:{value:e.ruleForm.input1,callback:function(t){e.$set(e.ruleForm,"input1",t)},expression:"ruleForm.input1"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"联系方式",prop:"input2"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"input",autocomplete:"off"},model:{value:e.ruleForm.input2,callback:function(t){e.$set(e.ruleForm,"input2",t)},expression:"ruleForm.input2"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车型",prop:"input3"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"input",autocomplete:"off"},model:{value:e.ruleForm.input3,callback:function(t){e.$set(e.ruleForm,"input3",t)},expression:"ruleForm.input3"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车型号",prop:"input4"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"input",autocomplete:"off"},model:{value:e.ruleForm.input4,callback:function(t){e.$set(e.ruleForm,"input4",t)},expression:"ruleForm.input4"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"司机姓名",prop:"input5"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"input",autocomplete:"off"},model:{value:e.ruleForm.input5,callback:function(t){e.$set(e.ruleForm,"input5",t)},expression:"ruleForm.input5"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"司机电话",prop:"input6"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{type:"input",autocomplete:"off"},model:{value:e.ruleForm.input6,callback:function(t){e.$set(e.ruleForm,"input6",t)},expression:"ruleForm.input6"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"选择日期",prop:"todaydate"}},[r("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.ruleForm.todaydate,callback:function(t){e.$set(e.ruleForm,"todaydate",t)},expression:"ruleForm.todaydate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"选择日期"}},[r("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"08:30",step:"00:15",end:"18:30"}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),r("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"08:30",step:"00:15",end:"18:30",minTime:e.startTime}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"选择里程",prop:"pass"}},[r("el-input-number",{attrs:{min:1,max:1e3,label:"描述里程"},on:{change:function(t){return e.handleChange()}},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),e._v("\n        "),r("el-button",{on:{click:function(t){return e.moneysum()}}},[e._v("客户应付")])],1),e._v(" "),r("el-form-item",{attrs:{label:"提交信息"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handsubmit("ruleForm")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},y=r("C7Lr")(x,_,!1,null,null,null).exports,w=r("4Xi4"),k=r.n(w),$=r("84iU"),E=r.n($),T={data:function(){var e=this;return{ruleForm:{pass:"",checkPass:"",telephone:"",username:"",userid:""},rules:{username:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],userid:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],pass:[{validator:function(t,r,n){""===r?n(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),n())},trigger:"blur"}],checkPass:[{validator:function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.ruleForm.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}],telephone:[{validator:function(e,t,r){if(!t)return r(new Error("手机号不能为空"));setTimeout(function(){k()(t)?t<1e10?(console.log(t.length),r(new Error("必须是十一位"))):r():r(new Error("请输入数字值"))},1e3)},trigger:"blur"}],age:[{validator:function(e,t,r){if(!t)return r(new Error("年龄不能为空"));setTimeout(function(){k()(t)?t<18?r(new Error("必须年满18岁")):r():r(new Error("请输入数字值"))},1e3)},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;console.log("submit");var r={userid:this.ruleForm.userid,username:this.ruleForm.username,password:this.ruleForm.pass,telephone:this.ruleForm.telephone,age:this.ruleForm.age};this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$api.post("/user/register",{jsonobj:F()(r)},function(e){console.log(e)}),alert("submit!")})},resetForm:function(e){this.$refs[e].resetFields()}}},S={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"账户",prop:"userid"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.ruleForm.userid,callback:function(t){e.$set(e.ruleForm,"userid",t)},expression:"ruleForm.userid"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"telephone"}},[r("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"11"},model:{value:e.ruleForm.telephone,callback:function(t){e.$set(e.ruleForm,"telephone",e._n(t))},expression:"ruleForm.telephone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"年龄",prop:"age"}},[r("el-input",{staticStyle:{width:"250px"},model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",e._n(t))},expression:"ruleForm.age"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]},C=r("C7Lr")(T,S,!1,null,null,null).exports,q=r("N3gQ"),R=r.n(q),L=r("3SpK"),P=r.n(L),A={data:function(){return{tableData:[{username:"",usertele:"",cartype:"",carnumber:"",drivername:"",drivertele:"",time:"",paymoney:""}]}},mounted:function(){this.request(1)},methods:{request:function(e){var t=this;this.$api.post("/user/findAll",{},function(e){console.log(e),t.tableData=e.data})},exportExcel:function(){var e=P.a.utils.table_to_book(document.querySelector("#out-table")),t=P.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{R.a.saveAs(new Blob([t],{type:"application/octet-stream"}),"sheet.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return t},handleEdit:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)}}},I={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[r("el-table",{attrs:{data:e.gridData}},[r("el-table-column",{attrs:{width:"150",property:"date",label:"日期"}}),e._v(" "),r("el-table-column",{attrs:{width:"100",property:"name",label:"姓名"}}),e._v(" "),r("el-table-column",{attrs:{width:"300",property:"address",label:"地址"}})],1),e._v(" "),r("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("click 激活")])],1),e._v(" "),r("el-table",{ref:"singleTable",attrs:{data:e.tableData,width:"100%",border:"3px",id:"out-table"}},[r("el-table-column",{attrs:{type:"index",align:"center",width:"50px"}}),e._v(" "),r("el-table-column",{attrs:{property:"time",label:"日期",align:"center","text-align":"center",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{property:"username",label:"客户姓名",align:"center",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{property:"usertele",label:"联系方式",align:"center",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{property:"cartype",label:"车型",align:"center",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{property:"carnumber",label:"车牌号",align:"center",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{property:"drivername",label:"司机姓名",align:"center",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{property:"drivertele",label:"联系方式",align:"center",width:"130px"}}),e._v(" "),r("el-table-column",{attrs:{property:"paymoney",label:"支付金额",align:"center",width:"130px"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),r("br"),e._v(" "),r("el-button",{staticStyle:{width:"100px","margin-left":"300px"},on:{click:e.exportExcel}},[e._v("打印数据")])],1)},staticRenderFns:[]},D=r("C7Lr")(A,I,!1,null,null,null).exports;n.default.use(g.a);var O=new g.a({routes:[{path:"/",redirect:"/login"},{path:"/",name:"/",meta:{requireAuth:!1},component:v,children:[{path:"/login",name:"login",meta:{requireAuth:!1},component:m}]},{path:"/content",name:"content",meta:{requireAuth:!0},component:y},{path:"/register",name:"register",meta:{requireAuth:!0},component:C},{path:"/test",name:"test",meta:{requireAuth:!0},component:D}]}),U=r("4gzT"),z=r.n(U),j=E.a.create({baseURL:"http://localhost:8080/",withCredentials:!0,transformRequest:[function(e){var t="";for(var r in e)!0===e.hasOwnProperty(r)&&(t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])+"&");return t}]});function M(){localStorage.removeItem("token"),sessionStorage.removeItem("token"),j.defaults.headers.common={Accept:"application/json, text/plain, */*"}}function N(e,t,r,n){j({method:e,url:t,data:"POST"===e||"PUT"===e?r:null,params:"GET"===e||"DELETE"===e?r:null}).then(function(e){n(e)}).catch(function(e){if(e.response&&(401===e.response.status||403===e.response.status))return M(),U.Message.warning("请先登录"),void O.push("login");U.Message.error(e.message)})}var Q={get:function(e,t,r,n){return N("GET",e,t,r)},post:function(e,t,r,n){return N("POST",e,t,r)},put:function(e,t,r,n){return N("PUT",e,t,r)},delete:function(e,t,r,n){return N("DELETE",e,t,r)},setToken:function(e){j.defaults.headers.common.Authorization="Bearer "+e},removeToken:function(){M()}};r("JKkS");n.default.config.productionTip=!1,n.default.prototype.$api=Q,n.default.use(z.a),new n.default({el:"#app",router:O,components:{App:f},template:"<App/>"})},NQTr:function(e,t){},Onu6:function(e,t){},wWmV:function(e,t){}},[1]);